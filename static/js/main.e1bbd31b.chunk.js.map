{"version":3,"sources":["lib/contracts.js","components/header.js","components/pageLoader.js","HotelList.js","HotelCreation.js","components/stars.js","ManageHotel.js","RoomBooking.js","MyHotels.js","Bookings.js","serviceWorker.js","index.js","App.js"],"names":["web3","address","contracts","instances","ethereum","window","isReady","Promise","res","rej","check","Factory","Hotel","setTimeout","enable","then","enArr","Web3","currentProvider","publicConfigStore","on","_ref","selectedAddress","console","log","providers","HttpProvider","process","eth","defaultAccount","TruffleContract","HotelFactory","setProvider","deployed","factoryInstance","contractsManager","name","stars","description","nameHex","utils","asciiToHex","this","execute","createContract","txReceipt","logs","args","contractAddress","price","cancellable","weiPrice","toWei","weiCancellable","at","hotelContract","addRoom","roomId","toString","getHotel","call","tx","id","hexToAscii","hotelName","Number","hotelStars","hotelDescription","listAllHotels","from","listMyHotels","currentRoomId","lastRoom","roomsPromise","i","push","getRoom","all","rooms","map","txResult","index","booked","fromWei","priceCancellable","hotelAddress","isCancellableBooking","dateStart","dateEnd","executeWithMoney","book","error","_context5","t0","start","end","isAvailableForDates","availableRoomsForDates","roomArray","available","filter","v","undefined","bookingId","cancel","_context8","listUserBookings","hotelIds","_ref2","Object","asyncToGenerator","regenerator_default","a","mark","_callee10","bookings","bookingObjects","wrap","_context10","prev","next","_this","myBookings","sent","length","hotel","amountPaid","status","startDate","endDate","abrupt","stop","_x26","apply","arguments","bookingsArray","reduce","acc","arr","concat","withdrawalPromises","_this2","withdrawal","BN","total","dryRun","withdraw","wei","func","_len","param","Array","_key","req","value","_len2","_key2","withStyles","theme","spacer","flexGrow","classes","react_default","createElement","AppBar_default","position","Toolbar_default","Typography_default","variant","color","Link","to","className","Button_default","loader","width","height","left","top","marginTop","marginLeft","CircularProgress_default","size","HotelList","props","classCallCheck","possibleConstructorReturn","getPrototypeOf","state","hotels","Contracts","listHotels","setState","Fragment","header","layout","pageLoader","Card_default","card","key","CardActionArea_default","CardMedia_default","media","image","CardContent_default","gutterBottom","component","CardActions_default","React","Component","appBar","defineProperty","spacing","unit","marginRight","breakpoints","up","marginBottom","HotelCreation","handleChange","event","target","hotelId","createHotel","align","Redirect","Paper_default","paper","TextField_default","label","onChange","fullWidth","autoComplete","required","multiline","rows","margin","FormControl_default","InputLabel_default","htmlFor","Select_default","starsSelect","MenuItem_default","buttonWrapper","onClick","saveHotel","padding","minWidth","display","justifyContent","button","right","_ref$rating","rating","fill","_","StarRate_default","ManageHotel","addingRoom","userHotels","hotelSummary","match","params","handleCloseAddRoomDialog","bind","assertThisInitialized","handleAddRoomDialogCreate","saveRoom","loadRooms","getRooms","_this3","_this$state$hotelSumm","Snackbar_default","errorSnack","open","includes","anchorOrigin","vertical","horizontal","SnackbarContent_default","errorSnackContent","message","Warning_default","style","verticalAlign","paragraph","components_stars","Fab_default","aria-label","addRoomFab","Add_default","Table_default","TableHead_default","TableRow_default","TableCell_default","TableBody_default","room","scope","Dialog_default","onClose","aria-labelledby","DialogTitle_default","DialogContent_default","DialogContentText_default","autoFocus","type","e","InputProps","startAdornment","InputAdornment_default","DialogActions_default","backgroundColor","palette","dark","HotelSummary","handleDateChange","date","utc","startOf","getAvailableRooms","moment","availableRooms","unix","availableIds","_callee3","_this2$state","diff","_context3","_this$state2","material_ui_pickers_esm","MomentUtils","animateYearScrolling","minDate","Date","bookRoom","MyHotels","withdrawalAmount","withdrawalByHotel","getWithdrawalTotal","userHotelsIds","withdrawByHotel","_callee4","_context4","t1","_x3","withdrawalArray","_ref3","_ref4","slicedToArray","amount","getBookings","getMyBookingsFromHotels","booking","addressRow","format","Bookings_BookingAction","onUpdate","BookingAction","callback","whiteSpace","overflow","textOverflow","Boolean","location","hostname","ReactDOM","render","CssBaseline_default","BrowserRouter","basename","Switch","Route","exact","path","RoomBooking","Bookings","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.e1bbd31b.chunk.js","sourcesContent":["import Web3 from \"web3\";\nimport TruffleContract from \"truffle-contract\";\nimport Hotel from \"../contracts/Hotel.json\";\nimport HotelFactory from \"../contracts/HotelFactory.json\";\n\nconst NETWORK_ADDR = process.env.REACT_APP_NETWORK_ADDR;\n\nlet web3;\n\n// Initialize local static variables\n// Keep all the contracts definitions\nlet contracts = {};\n// Keep all the contract instances\nlet instances = {};\n// The user address\nlet address;\n\n// Initialize web3 provider (through Metamask if possible)\nconst ethereum = window.ethereum;\nethereum.enable().then(enArr => {\n  if (typeof ethereum !== \"undefined\") {\n    web3 = new Web3(ethereum);\n    address = enArr[0];\n\n    // Subscribe to an event to update the user address when changing wallets\n    web3.currentProvider.publicConfigStore.on(\n      \"update\",\n      ({ selectedAddress }) => {\n        address = selectedAddress;\n      }\n    );\n  } else {\n    console.log(\"No web3? You should consider trying MetaMask!\");\n    web3 = new Web3(new Web3.providers.HttpProvider(NETWORK_ADDR));\n    address = web3.eth.defaultAccount;\n  }\n\n  // Load Hotel Factory contract and instanciate it\n  contracts.Factory = TruffleContract(HotelFactory);\n  contracts.Factory.setProvider(ethereum);\n  contracts.Factory.deployed().then(factoryInstance => {\n    instances.Factory = factoryInstance;\n  });\n\n  // Load Hotel contract (to be instantiated by hotel id)\n  contracts.Hotel = TruffleContract(Hotel);\n  contracts.Hotel.setProvider(ethereum);\n});\n\n// Resolves when contracts are ready and loaded\nexport function isReady() {\n  const check = res => {\n    if (instances.Factory && contracts.Hotel) {\n      res();\n    } else {\n      setTimeout(() => check(res), 200);\n    }\n  };\n  return new Promise((res, rej) => {\n    check(res);\n  });\n}\n\n// Class with functions to interact with our contracts\nclass ContractsManager {\n  // Creates a new hotel\n  async createHotel(name, stars, description) {\n    const nameHex = web3.utils.asciiToHex(name);\n    const txReceipt = await this.execute(\n      instances.Factory.createContract,\n      nameHex,\n      stars,\n      description\n    );\n\n    return txReceipt.logs[0].args.contractAddress;\n  }\n\n  // Add a room to a hotel\n  async addRoom(price, cancellable, address) {\n    const weiPrice = web3.utils.toWei(price);\n    const weiCancellable = web3.utils.toWei(cancellable);\n    const hotelContract = await contracts.Hotel.at(address);\n    const txReceipt = await this.execute(\n      hotelContract.addRoom,\n      weiPrice,\n      weiCancellable\n    );\n    return txReceipt.logs[0].args.roomId.toString(10);\n  }\n\n  // Get a hotel details from it's address\n  async getHotel(address) {\n    const hotelContract = await contracts.Hotel.at(address);\n    const tx = await hotelContract.getHotel.call();\n    return {\n      id: address,\n      name: web3.utils.hexToAscii(tx.hotelName),\n      stars: Number(tx.hotelStars),\n      description: tx.hotelDescription\n    };\n  }\n\n  // List all the hotels\n  listHotels() {\n    return instances.Factory.listAllHotels.call({ from: address });\n  }\n\n  // List all the hotels belonging to the caller\n  listMyHotels() {\n    return instances.Factory.listMyHotels.call({ from: address });\n  }\n\n  // Get all the rooms from a hotel\n  async getRooms(address) {\n    const hotelContract = await contracts.Hotel.at(address);\n    const lastRoom = await hotelContract.currentRoomId();\n\n    const roomsPromise = [];\n    for (let i = 1; i <= lastRoom; i++) {\n      roomsPromise.push(hotelContract.getRoom.call(i));\n    }\n\n    const rooms = await Promise.all(roomsPromise);\n\n    return rooms.map((txResult, index) => ({\n      id: index + 1,\n      booked: txResult.booked,\n      price: web3.utils.fromWei(txResult.price),\n      priceCancellable: web3.utils.fromWei(txResult.priceCancellable)\n    }));\n  }\n\n  // Book a room\n  async book(\n    roomId,\n    hotelAddress,\n    isCancellableBooking,\n    price,\n    dateStart,\n    dateEnd\n  ) {\n    const hotelContract = await contracts.Hotel.at(hotelAddress);\n\n    try {\n      return this.executeWithMoney(\n        hotelContract.book,\n        price.toString(),\n        roomId,\n        dateStart,\n        dateEnd,\n        isCancellableBooking\n      );\n    } catch (e) {\n      console.error(e);\n      throw e;\n    }\n  }\n\n  // Check a room availability between two dates\n  async checkAvailability(hotelAddress, roomId, start, end) {\n    const hotelContract = await contracts.Hotel.at(hotelAddress);\n    return await hotelContract.isAvailableForDates.call(roomId, start, end);\n  }\n\n  // Get all the available rooms between two dates\n  async availableRooms(hotelAddress, start, end) {\n    const hotelContract = await contracts.Hotel.at(hotelAddress);\n    const roomArray = await hotelContract.availableRoomsForDates.call(\n      start,\n      end\n    );\n    return roomArray\n      .map((available, i) => {\n        if (available) return i + 1;\n      })\n      .filter(v => v !== undefined);\n  }\n\n  // Cancels a booking\n  async cancel(hotelAddress, bookingId) {\n    const hotelContract = await contracts.Hotel.at(hotelAddress);\n    try {\n      return await hotelContract.cancel(bookingId, { from: address });\n    } catch (e) {\n      console.error(e);\n      throw e;\n    }\n  }\n\n  // Get all bookings from one hotel for a user\n  async myBookings(hotelAddress) {\n    const hotelContract = await contracts.Hotel.at(hotelAddress);\n    return hotelContract.listUserBookings({ from: address });\n  }\n\n  // Get all the bookings from many hotels for a user\n  async getMyBookingsFromHotels(hotelIds) {\n    const bookingsArray = await Promise.all(\n      hotelIds.map(async id => {\n        const bookings = await this.myBookings(id);\n        const bookingObjects = [];\n        for (let i = 0; i < bookings.id.length; i++) {\n          bookingObjects.push({\n            id: bookings.id[i],\n            hotel: id,\n            roomId: bookings.roomId[i].toString(),\n            amountPaid: web3.utils.fromWei(bookings.amountPaid[i]),\n            status: bookings.status[i].toString(),\n            startDate: bookings.startDate[i].toString(),\n            endDate: bookings.endDate[i].toString()\n          });\n        }\n        return bookingObjects;\n      })\n    );\n\n    return bookingsArray.reduce((acc, arr) => acc.concat(arr), []);\n  }\n\n  // Get the total a user can withdraw from all it's hotels\n  async getWithdrawalTotal(hotelIds) {\n    const withdrawalPromises = hotelIds.map(id => this.withdrawal(id));\n    const total = (await Promise.all(withdrawalPromises)).reduce((acc, BN) => {\n      return acc + Number(web3.utils.fromWei(BN));\n    }, 0);\n\n    return total;\n  }\n\n  // Get how much a user can withdraw (dry run) or execute the actual withdrawal\n  async withdrawal(hotelAddress, dryRun = true) {\n    const hotelContract = await contracts.Hotel.at(hotelAddress);\n\n    if (dryRun) {\n      return hotelContract.withdraw.call(/*For testing: Math.floor(Date.now() / 1000),*/ {\n        from: address\n      });\n    } else {\n      return hotelContract.withdraw(/*For testing: Math.floor(Date.now() / 1000),*/ {\n        from: address\n      });\n    }\n  }\n\n  // Convert wei to ETH\n  fromWei(wei) {\n    return web3.utils.fromWei(wei);\n  }\n\n  // execute a smart contract function with the from parameter\n  execute(func, ...param) {\n    return func(...param, { from: address });\n  }\n\n  // execute a smart contract function with the from parameter and a value to pay\n  executeWithMoney(func, price, ...param) {\n    const req = {\n      from: address,\n      value: web3.utils.toWei(price, \"ether\")\n    };\n\n    return func(...param, req);\n  }\n}\n\nconst contractsManager = new ContractsManager();\n\nexport default contractsManager;\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\n\nconst styles = theme => ({\n  spacer: {\n    flexGrow: 1\n  }\n});\n\nconst Header = ({ classes }) => (\n  <AppBar position=\"static\">\n    <Toolbar>\n      <Typography variant=\"h6\" color=\"inherit\">\n        <Link to=\"/\">Booking Blockchain</Link>\n      </Typography>\n      <div className={classes.spacer} />\n      <Button color=\"inherit\">\n        <Link to=\"/mybookings\">üß≥ My bookings</Link>\n      </Button>\n      <Button color=\"inherit\">\n        <Link to=\"/myhotels\">üè® My hotels</Link>\n      </Button>\n      <Button color=\"inherit\">\n        <Link to=\"/create\">üñå Create Hotel</Link>\n      </Button>\n    </Toolbar>\n  </AppBar>\n);\n\nexport default withStyles(styles)(Header);\n","import React from 'react';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nconst styles = theme => ({\n  loader: {\n    width: '100px',\n    height: '100px',\n    position: 'absolute',\n    left: '50%',\n    top: '50%',\n    marginTop: '-50px',\n    marginLeft: '-50px'\n  }\n});\n\nconst PageLoader = ({ classes }) => (\n  <CircularProgress size=\"100\" className={classes.loader} />\n);\n\nexport default withStyles(styles)(PageLoader);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport Typography from '@material-ui/core/Typography';\nimport withStyles from '@material-ui/core/styles/withStyles';\nimport Card from '@material-ui/core/Card';\nimport CardActionArea from '@material-ui/core/CardActionArea';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardMedia from '@material-ui/core/CardMedia';\nimport Button from '@material-ui/core/Button';\nimport Contracts, { isReady } from './lib/contracts';\nimport Header from './components/header';\nimport PageLoader from './components/pageLoader';\n\nconst styles = theme => ({\n  appBar: {\n    position: 'relative'\n  },\n  layout: {\n    width: 'auto',\n    marginLeft: theme.spacing.unit * 2,\n    marginRight: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 2 * 2)]: {\n      width: 600,\n      marginLeft: 'auto',\n      marginRight: 'auto'\n    }\n  },\n  card: {\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3\n  },\n  media: {\n    height: '200px'\n  }\n});\n\nclass HotelList extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hotels: []\n    };\n  }\n\n  async componentDidMount() {\n    await isReady();\n\n    const hotelIds = (await Contracts.listHotels()) || [];\n\n    const hotels = await Promise.all(\n      hotelIds.map(id => {\n        return Contracts.getHotel(id);\n      })\n    );\n\n    this.setState({\n      hotels\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <>\n        <Header />\n        <main className={classes.layout}>\n          {!this.state.hotels.length && <PageLoader />}\n          {this.state.hotels.map((hotel, index) => (\n            <Card className={classes.card} key={hotel.id}>\n              <CardActionArea>\n                <CardMedia\n                  className={classes.media}\n                  image={`https://source.unsplash.com/featured/600x${200 +\n                    index}/?hotel`}\n                />\n                <CardContent>\n                  <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                    {hotel.name}\n                  </Typography>\n                  <Typography component=\"p\">{hotel.description}</Typography>\n                </CardContent>\n              </CardActionArea>\n              <CardActions>\n                <Link to={`/book/${hotel.id}`}>\n                  <Button color=\"primary\">Book a room</Button>\n                </Link>\n              </CardActions>\n            </Card>\n          ))}\n        </main>\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(HotelList);\n","import React, { Component } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Paper from \"@material-ui/core/Paper\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport MenuItem from \"@material-ui/core/MenuItem\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport Select from \"@material-ui/core/Select\";\nimport { Redirect } from \"react-router\";\n\nimport Header from \"./components/header\";\nimport Contracts from \"./lib/contracts\";\n\nconst styles = theme => ({\n  appBar: {\n    position: \"relative\"\n  },\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing.unit * 2,\n    marginRight: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 2 * 2)]: {\n      width: 600,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  paper: {\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3,\n    padding: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 3 * 2)]: {\n      marginTop: theme.spacing.unit * 6,\n      marginBottom: theme.spacing.unit * 6,\n      padding: theme.spacing.unit * 3\n    }\n  },\n  starsSelect: {\n    minWidth: \"120px\"\n  },\n  buttonWrapper: {\n    display: \"flex\",\n    justifyContent: \"flex-end\"\n  },\n  button: {\n    marginTop: theme.spacing.unit * 3,\n    marginLeft: theme.spacing.unit\n  }\n});\n\nclass HotelCreation extends Component {\n  /**\n   * Constructor.\n   * @param {*} props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      hotelName: \"\",\n      hotelId: null,\n      hotelDescription: \"\",\n      hotelStars: 0,\n      error: \"\"\n    };\n  }\n\n  handleChange = key => event => {\n    this.setState({\n      [key]: event.target.value\n    });\n  };\n\n  async saveHotel() {\n    const { hotelName, hotelDescription, hotelStars } = this.state;\n    if (!hotelName || !hotelDescription || !hotelStars) {\n      this.setState({ error: \"Missing required field.\" });\n      return;\n    }\n    const address = await Contracts.createHotel(\n      hotelName,\n      hotelStars,\n      hotelDescription\n    );\n    this.setState({ hotelId: address });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { hotelId } = this.state;\n\n    const error = (\n      <Typography color=\"error\" align=\"center\">\n        {this.state.error}\n      </Typography>\n    );\n    return (\n      <>\n        {hotelId ? <Redirect to={`manage/${hotelId}`} /> : \"\"}\n        <Header />\n        <main className={classes.layout}>\n          <Paper className={classes.paper}>\n            <Typography component=\"h1\" variant=\"h4\" align=\"center\">\n              Create Hotel\n            </Typography>\n            {error}\n            <TextField\n              label=\"Hotel Name\"\n              value={this.state.hotelName}\n              onChange={this.handleChange(\"hotelName\")}\n              fullWidth\n              autoComplete=\"fname\"\n              required\n            />\n            <TextField\n              label=\"Hotel Description\"\n              multiline\n              rows=\"5\"\n              value={this.state.hotelDescription}\n              onChange={this.handleChange(\"hotelDescription\")}\n              margin=\"normal\"\n              variant=\"outlined\"\n              fullWidth\n              required\n            />\n\n            <FormControl>\n              <InputLabel htmlFor=\"stars\">Stars</InputLabel>\n              <Select\n                required\n                className={classes.starsSelect}\n                value={this.state.hotelStars}\n                onChange={this.handleChange(\"hotelStars\")}\n              >\n                <MenuItem value={0}>0</MenuItem>\n                <MenuItem value={1}>1</MenuItem>\n                <MenuItem value={2}>2</MenuItem>\n                <MenuItem value={3}>3</MenuItem>\n                <MenuItem value={4}>4</MenuItem>\n                <MenuItem value={5}>5</MenuItem>\n              </Select>\n            </FormControl>\n            <div className={classes.buttonWrapper}>\n              <Button\n                onClick={() => this.saveHotel()}\n                variant=\"contained\"\n                color=\"primary\"\n                className=\"button\"\n              >\n                Create\n              </Button>\n            </div>\n          </Paper>\n        </main>\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(HotelCreation);\n","import React from 'react';\nimport StarRate from '@material-ui/icons/StarRate';\nimport withStyles from '@material-ui/core/styles/withStyles';\n\nconst styles = theme => ({\n  stars: {\n    position: 'absolute',\n    top: theme.spacing.unit * 4,\n    right: theme.spacing.unit * 2,\n    color: 'rgb(242,221,78)'\n  }\n});\n\nconst star = ({ rating = 0, classes }) => (\n  <div className={classes.stars}>\n    {Array(rating)\n      .fill(0)\n      .map((_, i) => (\n        <StarRate key={i} />\n      ))}\n  </div>\n);\n\nexport default withStyles(styles)(star);\n","import React, { Component } from \"react\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Dialog from \"@material-ui/core/Dialog\";\nimport DialogContent from \"@material-ui/core/DialogContent\";\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\nimport DialogActions from \"@material-ui/core/DialogActions\";\nimport DialogContentText from \"@material-ui/core/DialogContentText\";\nimport Button from \"@material-ui/core/Button\";\nimport Fab from \"@material-ui/core/Fab\";\nimport AddIcon from \"@material-ui/icons/Add\";\nimport WarningIcon from \"@material-ui/icons/Warning\";\nimport InputAdornment from \"@material-ui/core/InputAdornment\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport SnackbarContent from \"@material-ui/core/SnackbarContent\";\n\nimport Header from \"./components/header\";\nimport Stars from \"./components/stars\";\nimport Contracts, { isReady } from \"./lib/contracts\";\n\nconst styles = theme => ({\n  appBar: {\n    position: \"relative\"\n  },\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing.unit * 2,\n    marginRight: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 2 * 2)]: {\n      width: 600,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  paper: {\n    position: \"relative\",\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3,\n    padding: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 3 * 2)]: {\n      marginTop: theme.spacing.unit * 6,\n      marginBottom: theme.spacing.unit * 6,\n      padding: theme.spacing.unit * 3\n    }\n  },\n  addRoomFab: {\n    position: \"absolute\",\n    right: theme.spacing.unit * 2,\n    top: theme.spacing.unit * 2\n  },\n  errorSnack: {\n    position: \"static\",\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3\n  },\n  errorSnackContent: {\n    backgroundColor: theme.palette.error.dark\n  }\n});\n\nclass ManageHotel extends Component {\n  /**\n   * Constructor.\n   * @param {*} props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      addingRoom: false,\n      price: \"\",\n      priceCancellable: \"\",\n      userHotels: [],\n      hotelSummary: {\n        id: null,\n        name: \"\",\n        description: \"\",\n        stars: 0\n      },\n      rooms: []\n    };\n\n    this.hotelAddress = this.props.match.params.address;\n\n    this.handleCloseAddRoomDialog = this.handleCloseAddRoomDialog.bind(this);\n    this.handleAddRoomDialogCreate = this.handleAddRoomDialogCreate.bind(this);\n    this.saveRoom = this.saveRoom.bind(this);\n  }\n\n  async componentDidMount() {\n    await isReady();\n    const hotelSummary = await Contracts.getHotel(this.hotelAddress);\n    this.setState({\n      hotelSummary\n    });\n\n    this.loadRooms();\n\n    Contracts.listMyHotels().then(hotelIds => {\n      this.setState({\n        userHotels: hotelIds\n      });\n    });\n  }\n\n  async loadRooms() {\n    const rooms = await Contracts.getRooms(this.hotelAddress);\n\n    this.setState({\n      rooms\n    });\n  }\n\n  handleCloseAddRoomDialog() {\n    this.setState({ addingRoom: false });\n  }\n\n  async handleAddRoomDialogCreate() {\n    const { price, priceCancellable, hotelSummary } = this.state;\n    this.handleCloseAddRoomDialog();\n    await this.saveRoom(hotelSummary.id, price, priceCancellable);\n    this.setState({\n      price: \"\",\n      priceCancellable: \"\"\n    });\n  }\n\n  async saveRoom(hotelId, price, priceCancellable) {\n    const roomId = await Contracts.addRoom(price, priceCancellable, hotelId);\n    this.loadRooms();\n  }\n\n  handleChange = key => event => {\n    this.setState({\n      [key]: event.target.value\n    });\n  };\n\n  render() {\n    const { classes } = this.props;\n    const { id, name, description, stars } = this.state.hotelSummary;\n    const { rooms } = this.state;\n\n    return (\n      <>\n        <Header />\n        <main className={classes.layout}>\n          <Snackbar\n            className={classes.errorSnack}\n            open={!this.state.userHotels.includes(this.hotelAddress)}\n            anchorOrigin={{ vertical: \"top\", horizontal: \"center\" }}\n          >\n            <SnackbarContent\n              className={classes.errorSnackContent}\n              message={\n                <span>\n                  <WarningIcon style={{ verticalAlign: \"bottom\" }} /> You're not\n                  the owner of this hotel and can't modify it.\n                </span>\n              }\n            />\n          </Snackbar>\n\n          <Paper className={classes.paper}>\n            <Typography component=\"h1\" variant=\"h4\">\n              {name}\n            </Typography>\n            <Typography\n              variant=\"subtitle1\"\n              gutterBottom\n              paragraph\n              className={classes.description}\n            >\n              {description}\n            </Typography>\n            <Stars rating={stars} />\n          </Paper>\n          <Paper className={classes.paper}>\n            <Typography component=\"h2\" variant=\"h4\">\n              Rooms\n            </Typography>\n            {this.state.userHotels.includes(this.hotelAddress) ? (\n              <Fab\n                color=\"secondary\"\n                aria-label=\"Add\"\n                className={classes.addRoomFab}\n                onClick={() => this.setState({ addingRoom: true })}\n              >\n                <AddIcon />\n              </Fab>\n            ) : (\n              \"\"\n            )}\n\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Room</TableCell>\n                  <TableCell align=\"right\">Pre-paid price</TableCell>\n                  <TableCell align=\"right\">Cancellable price</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {rooms.map(room => (\n                  <TableRow key={room.id}>\n                    <TableCell component=\"th\" scope=\"row\">\n                      {room.id}\n                    </TableCell>\n                    <TableCell align=\"right\">{room.price}</TableCell>\n                    <TableCell align=\"right\">{room.priceCancellable}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </Paper>\n        </main>\n\n        <Dialog\n          open={this.state.addingRoom}\n          onClose={this.handleCloseAddRoomDialog}\n          aria-labelledby=\"add-room-dialog-title\"\n        >\n          <DialogTitle id=\"add-room-dialog-title\">Add Room</DialogTitle>\n          <DialogContent>\n            <DialogContentText>\n              Please enter the room price and the price for cancellable\n              bookings. Leave empty if the booking is not cancellable.\n            </DialogContentText>\n            <TextField\n              autoFocus\n              margin=\"dense\"\n              label=\"Pre-paid booking price\"\n              type=\"number\"\n              fullWidth\n              value={this.state.price}\n              onChange={e => this.setState({ price: e.target.value })}\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">ETH</InputAdornment>\n                )\n              }}\n            />\n            <TextField\n              margin=\"dense\"\n              label=\"Cancellable booking price\"\n              type=\"number\"\n              fullWidth\n              value={this.state.priceCancellable}\n              onChange={e =>\n                this.setState({ priceCancellable: e.target.value })\n              }\n              InputProps={{\n                startAdornment: (\n                  <InputAdornment position=\"start\">ETH</InputAdornment>\n                )\n              }}\n            />\n          </DialogContent>\n          <DialogActions>\n            <Button onClick={this.handleCloseAddRoomDialog} color=\"primary\">\n              Cancel\n            </Button>\n            <Button onClick={this.handleAddRoomDialogCreate} color=\"primary\">\n              Create\n            </Button>\n          </DialogActions>\n        </Dialog>\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(ManageHotel);\n","import React, { Component } from \"react\";\nimport MomentUtils from \"@date-io/moment\";\nimport moment from \"moment\";\nimport { MuiPickersUtilsProvider, DatePicker } from \"material-ui-pickers\";\nimport Typography from \"@material-ui/core/Typography\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\n\nimport Header from \"./components/header\";\nimport Stars from \"./components/stars\";\nimport Contracts, { isReady } from \"./lib/contracts\";\n\nconst styles = theme => ({\n  appBar: {\n    position: \"relative\"\n  },\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing.unit * 2,\n    marginRight: theme.spacing.unit * 2,\n    [theme.breakpoints.up(800 + theme.spacing.unit * 2 * 2)]: {\n      width: 800,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  paper: {\n    position: \"relative\",\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3,\n    padding: theme.spacing.unit * 2,\n    [theme.breakpoints.up(800 + theme.spacing.unit * 3 * 2)]: {\n      marginTop: theme.spacing.unit * 6,\n      marginBottom: theme.spacing.unit * 6,\n      padding: theme.spacing.unit * 3\n    }\n  },\n  addRoomFab: {\n    position: \"absolute\",\n    right: theme.spacing.unit * 2,\n    top: theme.spacing.unit * 2\n  },\n  errorSnack: {\n    position: \"static\",\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3\n  },\n  errorSnackContent: {\n    backgroundColor: theme.palette.error.dark\n  }\n});\n\nclass HotelSummary extends Component {\n  /**\n   * Constructor.\n   * @param {*} props\n   */\n  constructor(props) {\n    super(props);\n    this.state = {\n      addingRoom: false,\n      price: \"\",\n      priceCancellable: \"\",\n      userHotels: [],\n      startDate: moment()\n        .utc()\n        .startOf(\"day\"),\n      endDate: moment()\n        .utc()\n        .startOf(\"day\"),\n      hotelSummary: {\n        id: null,\n        name: \"\",\n        description: \"\",\n        stars: 0\n      },\n      rooms: []\n    };\n\n    this.hotelAddress = this.props.match.params.address;\n\n    //this.checkAvailability = this.checkAvailability.bind(this);\n    this.getAvailableRooms = this.getAvailableRooms.bind(this);\n  }\n\n  async componentDidMount() {\n    await isReady();\n    const hotelSummary = await Contracts.getHotel(this.hotelAddress);\n    this.setState({\n      hotelSummary\n    });\n  }\n\n  handleCloseAddRoomDialog() {\n    this.setState({ addingRoom: false });\n  }\n\n  handleChange = key => event => {\n    this.setState({\n      [key]: event.target.value\n    });\n  };\n\n  handleDateChange = key => date => {\n    this.setState({ [key]: date.utc().startOf(\"day\") });\n    this.getAvailableRooms();\n  };\n\n  async getAvailableRooms() {\n    const { startDate, endDate } = this.state;\n\n    const availableIds = await Contracts.availableRooms(\n      this.hotelAddress,\n      startDate.unix(),\n      endDate.unix()\n    );\n    const rooms = await Contracts.getRooms(this.hotelAddress);\n\n    const availableRooms = rooms.filter(({ id }) => availableIds.includes(id));\n\n    this.setState({\n      rooms: availableRooms\n    });\n  }\n\n  bookRoom(roomId, price, isCancellableBooking = false) {\n    return async () => {\n      const { startDate, endDate } = this.state;\n      const diff = endDate.diff(startDate, \"days\") || 1;\n      console.log(`${diff} nights`);\n\n      const res = await Contracts.book(\n        roomId,\n        this.hotelAddress,\n        isCancellableBooking,\n        diff * price,\n        startDate.unix(),\n        endDate.unix()\n      );\n      console.log(res);\n      this.getAvailableRooms();\n      return res;\n    };\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { startDate, endDate, rooms } = this.state;\n    const { id, name, description, stars } = this.state.hotelSummary;\n    return (\n      <>\n        <Header />\n        <main className={classes.layout}>\n          <Paper className={classes.paper}>\n            <Typography component=\"h1\" variant=\"h4\">\n              {name}\n            </Typography>\n            <Typography\n              variant=\"subtitle1\"\n              gutterBottom\n              paragraph\n              className={classes.description}\n            >\n              {description}\n            </Typography>\n            <Stars rating={stars} />\n          </Paper>\n          <Paper\n            className={classes.paper}\n            style={{ display: \"flex\", justifyContent: \"space-between\" }}\n          >\n            <MuiPickersUtilsProvider utils={MomentUtils}>\n              <DatePicker\n                label=\"Checkin\"\n                value={startDate}\n                onChange={this.handleDateChange(\"startDate\")}\n                animateYearScrolling={false}\n                minDate={new Date()}\n              />\n              <DatePicker\n                label=\"Checkout\"\n                value={endDate}\n                onChange={this.handleDateChange(\"endDate\")}\n                animateYearScrolling={false}\n                minDate={startDate}\n              />\n            </MuiPickersUtilsProvider>\n            <Button variant=\"outlined\" onClick={this.getAvailableRooms}>\n              Check availability\n            </Button>\n          </Paper>\n          <Paper className={classes.paper}>\n            <Typography component=\"h2\" variant=\"h4\">\n              Rooms\n            </Typography>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Room</TableCell>\n                  <TableCell align=\"right\">Pre-paid price</TableCell>\n                  <TableCell align=\"right\">Cancellable price</TableCell>\n                  <TableCell>Book</TableCell>\n                  <TableCell>Book Cancellable</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {rooms.map(room => (\n                  <TableRow key={room.id}>\n                    <TableCell component=\"th\" scope=\"row\">\n                      {room.id}\n                    </TableCell>\n                    <TableCell align=\"right\">{room.price}</TableCell>\n                    <TableCell align=\"right\">{room.priceCancellable}</TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"outlined\"\n                        onClick={this.bookRoom(room.id, room.price)}\n                      >\n                        Book\n                      </Button>\n                    </TableCell>\n                    <TableCell>\n                      <Button\n                        variant=\"outlined\"\n                        onClick={this.bookRoom(\n                          room.id,\n                          room.priceCancellable,\n                          true\n                        )}\n                      >\n                        Book Cancellable\n                      </Button>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </Paper>\n        </main>\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(HotelSummary);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Typography from \"@material-ui/core/Typography\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Contracts, { isReady } from \"./lib/contracts\";\nimport Header from \"./components/header\";\nimport PageLoader from \"./components/pageLoader\";\nimport { totalmem } from \"os\";\n\nconst styles = theme => ({\n  appBar: {\n    position: \"relative\"\n  },\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing.unit * 2,\n    marginRight: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 2 * 2)]: {\n      width: 600,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  card: {\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3\n  },\n  media: {\n    height: \"200px\"\n  }\n});\n\nclass MyHotels extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hotels: [],\n      withdrawalAmount: 0,\n      withdrawalByHotel: {}\n    };\n\n    this.getWithdrawalTotal = this.getWithdrawalTotal.bind(this);\n  }\n\n  async componentDidMount() {\n    await isReady();\n    const userHotelsIds = (await Contracts.listMyHotels()) || [];\n\n    this.getWithdrawalTotal(userHotelsIds);\n    this.withdrawByHotel(userHotelsIds);\n\n    const hotels = await Promise.all(\n      userHotelsIds.map(id => {\n        return Contracts.getHotel(id);\n      })\n    );\n\n    this.setState({\n      hotels\n    });\n  }\n\n  async getWithdrawalTotal(hotelIds) {\n    const withdrawalAmount = await Contracts.getWithdrawalTotal(hotelIds);\n    console.log(withdrawalAmount);\n    this.setState({\n      withdrawalAmount\n    });\n  }\n\n  withdraw(hotelId) {\n    return async () => {\n      await Contracts.withdrawal(hotelId, false);\n    };\n  }\n\n  async withdrawByHotel(hotelId) {\n    const withdrawalArray =\n      (await Promise.all(\n        hotelId.map(async id => {\n          return [id, await Contracts.withdrawal(id)];\n        })\n      )) || [];\n\n    const withdrawalByHotel = withdrawalArray.reduce((acc, [id, amount]) => {\n      acc[id] = Contracts.fromWei(amount) + \"ETH\";\n      return acc;\n    }, {});\n    console.log(withdrawalByHotel);\n    this.setState({\n      withdrawalByHotel\n    });\n  }\n\n  render() {\n    const { classes } = this.props;\n    const { withdrawalAmount } = this.state;\n    return (\n      <>\n        <Header />\n        <main className={classes.layout}>\n          <Card className={classes.card}>\n            <CardContent>\n              <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                Total you can withdraw: {withdrawalAmount} ETH\n              </Typography>\n            </CardContent>\n          </Card>\n          {!this.state.hotels.length && <PageLoader />}\n          {this.state.hotels.map(hotel => (\n            <Card className={classes.card} key={hotel.id}>\n              <CardActionArea>\n                <Link to={`/manage/${hotel.id}`}>\n                  <CardContent>\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\n                      {hotel.name}\n                    </Typography>\n                  </CardContent>\n                </Link>\n              </CardActionArea>\n              {this.state.withdrawalByHotel[hotel.id] && (\n                <Button onClick={this.withdraw(hotel.id)}>\n                  withdraw {this.state.withdrawalByHotel[hotel.id]}\n                </Button>\n              )}\n            </Card>\n          ))}\n        </main>\n      </>\n    );\n  }\n}\n\nexport default withStyles(styles)(MyHotels);\n","import React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Typography from \"@material-ui/core/Typography\";\nimport withStyles from \"@material-ui/core/styles/withStyles\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Button from \"@material-ui/core/Button\";\nimport moment from \"moment\";\nimport Contracts, { isReady } from \"./lib/contracts\";\nimport Header from \"./components/header\";\n\nconst styles = theme => ({\n  layout: {\n    width: \"auto\",\n    marginLeft: theme.spacing.unit * 2,\n    marginRight: theme.spacing.unit * 2,\n    [theme.breakpoints.up(800 + theme.spacing.unit * 2 * 2)]: {\n      width: 800,\n      marginLeft: \"auto\",\n      marginRight: \"auto\"\n    }\n  },\n  paper: {\n    position: \"relative\",\n    marginTop: theme.spacing.unit * 3,\n    marginBottom: theme.spacing.unit * 3,\n    padding: theme.spacing.unit * 2,\n    [theme.breakpoints.up(600 + theme.spacing.unit * 3 * 2)]: {\n      marginTop: theme.spacing.unit * 6,\n      marginBottom: theme.spacing.unit * 6,\n      padding: theme.spacing.unit * 3\n    }\n  },\n  addressRow: {\n    width: \"150px\",\n    whiteSpace: \"nowrap\",\n    overflow: \"hidden\",\n    textOverflow: \"ellipsis\"\n  }\n});\n\nconst cancelBooking = (hotelId, bookingId, callback) => {\n  return () => {\n    const cancel = Contracts.cancel(hotelId, bookingId);\n    callback(cancel);\n    return cancel;\n  };\n};\n\nclass MyHotels extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      hotelIds: [],\n      bookings: []\n    };\n\n    this.getBookings = this.getBookings.bind(this);\n  }\n\n  async componentDidMount() {\n    await isReady();\n    const hotelIds = (await Contracts.listHotels()) || [];\n\n    this.setState({\n      hotelIds\n    });\n\n    this.getBookings();\n  }\n\n  async getBookings() {\n    const hotelIds = this.state.hotelIds;\n    const bookings = await Contracts.getMyBookingsFromHotels(hotelIds);\n    console.log(bookings);\n    this.setState({\n      bookings\n    });\n  }\n  /*\naddress customer;\nuint roomId;\nuint startDate;\nuint endDate;\nuint dateTimeStart;\nuint amountPaid;\nBookingStatus status;\n*/\n  render() {\n    const { classes } = this.props;\n    const { bookings } = this.state;\n\n    return (\n      <>\n        <Header />\n        <main className={classes.layout}>\n          <Paper className={classes.paper}>\n            <Typography component=\"h1\" variant=\"h4\">\n              My bookings\n            </Typography>\n            <Table>\n              <TableHead>\n                <TableRow>\n                  <TableCell>Hotel</TableCell>\n                  <TableCell align=\"right\">Checkin</TableCell>\n                  <TableCell align=\"right\">Checkout</TableCell>\n                  <TableCell align=\"right\">Price</TableCell>\n                  <TableCell align=\"right\">Cancel</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {bookings.map(booking => (\n                  <TableRow key={booking.id}>\n                    <TableCell component=\"th\" scope=\"row\">\n                      <div className={classes.addressRow}>{booking.hotel}</div>\n                    </TableCell>\n                    <TableCell>\n                      {moment.unix(booking.startDate).format(\"D/M/YYYY\")}\n                    </TableCell>\n                    <TableCell>\n                      {moment.unix(booking.endDate).format(\"D/M/YYYY\")}\n                    </TableCell>\n                    <TableCell align=\"right\">{booking.amountPaid}</TableCell>\n                    <TableCell align=\"right\">\n                      <BookingAction\n                        booking={booking}\n                        onUpdate={this.getBookings}\n                      />\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n          </Paper>\n        </main>\n      </>\n    );\n  }\n}\n\nconst BookingAction = ({ booking, onUpdate }) => {\n  switch (booking.status) {\n    case \"0\":\n      return \"Cancelled\";\n    case \"1\":\n    case \"3\":\n      return \"Confirmed\";\n    case \"2\": {\n      if (booking.startDate <= moment().unix()) {\n        return \"Confirmed\";\n      }\n\n      return (\n        <Button\n          variant=\"outlined\"\n          onClick={cancelBooking(booking.hotel, booking.id, onUpdate)}\n        >\n          Cancel\n        </Button>\n      );\n    }\n    default:\n      return \"Oups\";\n  }\n};\n\nexport default withStyles(styles)(MyHotels);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","import React from \"react\";\nimport { BrowserRouter, Switch, Route } from \"react-router-dom\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport HotelList from \"./HotelList\";\nimport HotelCreation from \"./HotelCreation\";\nimport ManageHotel from \"./ManageHotel\";\nimport RoomBooking from \"./RoomBooking\";\nimport MyHotels from \"./MyHotels\";\nimport Bookings from \"./Bookings\";\n\nexport default function() {\n  return (\n    <>\n      <CssBaseline />\n      <BrowserRouter basename={process.env.PUBLIC_URL}>\n        <Switch>\n          <Route exact path=\"/book/:address\" component={RoomBooking} />\n          <Route exact path=\"/myhotels\" component={MyHotels} />\n          <Route exact path=\"/mybookings\" component={Bookings} />\n          <Route exact path=\"/create\" component={HotelCreation} />\n          <Route path=\"/manage/:address\" component={ManageHotel} />\n          <Route exact path=\"/\" component={HotelList} />\n        </Switch>\n      </BrowserRouter>\n    </>\n  );\n}\n"],"sourceRoot":""}